!function(e,r){for(var n in r)e[n]=r[n]}(exports,function(e){var r={};function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)n.d(t,i,function(r){return e[r]}.bind(null,i));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=4)}([function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.validInterfaceElements=["screen","button","message","app","counter"];r.validActions=["show","enable","disable","hide","reset","finish"];r.validEvents=["click","init","finish"];r.validTimeUnits=["s","m","ms"];r.validAppCmds=["INIT","RESET","FINISH"];r.defaultData={events:{init:[],finish:[],click:[]},interface:{button:[],message:[],counter:[],screen:[]},actions:{},errors:[],controllers:[],responses:[]}},function(e,r,n){"use strict";var t=this&&this.__spreadArrays||function(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;var t=Array(e),i=0;for(r=0;r<n;r++)for(var o=arguments[r],s=0,a=o.length;s<a;s++,i++)t[i]=o[s];return t};Object.defineProperty(r,"__esModule",{value:!0});var i=function(e){var r=[];for(var n in e)n&&r.push(n);return r};r.getKeys=i;var o=function(e){return e&&e.constructor==Object};r.isObj=o;r.isStr=function(e){return e&&e.constructor==String};var s=function(e){return e&&e.constructor==Array};r.isArr=s;r.cloneDeep=function(e){return JSON.parse(JSON.stringify(e))};var a=function(e,r,n){if(!e&&!r)return null;if(!e)return r;if(!r)return e;if(o(e)&&o(r)){var u={},c=i(e),l=i(r);return c.forEach((function(t){u[t]=a(e[t],r[t],n)})),l.forEach((function(t){c.includes(t)||(u[t]=a(e[t],r[t],n))})),u}var d;return s(e)&&s(r)?(n?d=e.concat(r):(d=t(e),r.forEach((function(e){d.includes(e)||d.push(e)}))),d):r};r.merge=a;r.messageErrors={inLine:function(e){return"Erro na linha "+e},invalidCommand:function(e,r){return"Sintaxe incorreta: "+e+'\nComando "'+r+'" não identificado.'},invalidElement:function(e,r){return"Sintaxe incorreta: "+e+'\nElemento "'+r+'" inválido.'},invalidResponse:function(e,r){return"Sintaxe incorreta: "+e+'\nResposta "'+r+'" inválida.'},invalidConsequence:function(e,r){return"Sintaxe incorreta: "+e+'\nConsequência "'+r+'" inválida.'},invalidPoints:function(e){return"Sintaxe incorreta: "+e+"\nA quantidade de pontos parece incorreta."},invalidContingence:function(e){return"Sintaxe incorreta: "+e+'\nContingência "'+e+'" inválida.'},invalidContingenceInterval:function(e){return"Sintaxe incorreta: "+e+'\nIntervalo de contingência inválido: "'+e+'"'},undefinedElement:function(e){return'Erro semântico, o elemento "'+e+'" não existe'},invalidInput:function(e){return"Entrada inválida "+e},codeError:function(e){return"Erro no código:\n  "+e.join("\n")},alreadyStarted:function(){return"O app já foi iniciado"},notAlreadyStarted:function(){return"O app não foi iniciado"},bug:function(e){return"Erro catastrófico! "+e}};r.convertTime=function(e,r){switch(r){case"ms":return e;case"s":return 1e3*e;case"m":return 6e4*e}}},function(e,r,n){"use strict";var t;Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.Response=0]="Response",e[e.Contingence=1]="Contingence",e[e.Consequence=2]="Consequence",e[e.Condition=3]="Condition",e[e.Error=4]="Error"}(t||(t={})),r.Type=t;var i=function(e){return e.replace(/\#.+\n/g,"\n").replace(/ +/g,"").replace(/\n{2,}/g,"\n")};r.cleanCode=i;var o=function(e){return e.split(/\n/g).filter((function(e){return e}))};r.splitCode=o;var s=function(e,r){var n={text:e,type:t.Error};return/^R\d+=/.test(e)?n.type=t.Response:/^C\d+=/.test(e)?n.type=t.Consequence:/^&\d+=/.test(e)?n.type=t.Contingence:/^@\d+=/.test(e)&&(n.type=t.Condition),n};r.lineTokenizer=s;var a=function(e){return e.map((function(e,r){return s(e)}))};r.tokenizer=a;r.tokenize=function(e){return a(o(i(e)))}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=n(2),i=n(1),o=n(0),s=/-(\d+)([ms]{1,2})$/,a=/\*(\d+)$/,u=/\|/;r.codeParser=function(e){var r=i.cloneDeep(o.defaultData);return e.forEach((function(e){var n,c,l,d,p,f,v,m,g;switch(e.type){case t.Type.Response:c=e.text,l=c.split("="),d=l[0],p=l[1].split("."),f=p[0],v=p[1],m=p[2],g=i.cloneDeep(o.defaultData),2==p.length?o.validEvents.includes(p[1])?g.events[p[1]].push(d):g.errors.push(i.messageErrors.invalidCommand(c,p[1])):3==p.length?o.validInterfaceElements.includes(f)?o.validEvents.includes(m)?(g.events[m].push(v+":"+d),g.interface[f].includes(v)||g.interface[f].push(v)):g.errors.push(i.messageErrors.invalidResponse(c,m)):g.errors.push(i.messageErrors.invalidElement(c,f)):g.errors.push(i.messageErrors.invalidPoints(c)),g.responses.includes(d)||g.responses.push(d),n=g;break;case t.Type.Consequence:n=function(e){var r=e.split("="),n=r[0],t=i.cloneDeep(o.defaultData),s=r[1].split("|").map((function(e){return e.split(".")}));return t.actions[n]=[],s.forEach((function(r){var s=r[0],a=r[1],u=r[2];2==r.length?o.validActions.includes(r[1])?t.actions[n].push("app:"+r[1]):t.errors.push(i.messageErrors.invalidCommand(e,r[1])):3==r.length?o.validActions.includes(u)?(t.actions[n].push(a+":"+u),t.interface[s].includes(a)||t.interface[s].push(a)):t.errors.push(i.messageErrors.invalidConsequence(e,u)):t.errors.push(i.messageErrors.invalidPoints(e))})),t}(e.text);break;case t.Type.Contingence:n=function(e){var r=i.cloneDeep(o.defaultData),n={input:"",output:null,runAfter:{attempts:1,time:0,timeUnit:null}};try{var t=e.split("=")[1].split(/->/),c=t[0],l=t[1];s.test(c)&&(c=c.replace(s,(function(t,s,a){return(s=Number(s))&&o.validTimeUnits.includes(a)?(n.runAfter.time=s,n.runAfter.timeUnit=a):r.errors.push(i.messageErrors.invalidContingenceInterval(e)),""}))),a.test(c)&&(c=c.replace(a,(function(t,o){return(o=Number(o))?n.runAfter.attempts=o:r.errors.push(i.messageErrors.invalidContingenceInterval(e)),""}))),n.input=c;var d=void 0;d=u.test(l)?l.split("|"):[l],n.output=d,r.controllers.push(n)}catch(n){r.errors.push(i.messageErrors.invalidContingence(e))}return r}(e.text);break;case t.Type.Error:n={errors:r.errors.concat([i.messageErrors.inLine(e.text)])}}n?r=i.merge(r,n):n={errors:r.errors.concat([i.messageErrors.bug(e.text)])}})),r};r.semanticAnalyse=function(e){var r=i.cloneDeep(e),n=i.getKeys(r.actions);return e.controllers.forEach((function(e){r.responses.includes(e.input)||r.errors.push(i.messageErrors.undefinedElement(e.input)),e.output.forEach((function(t){n.includes(t)||r.errors.push(i.messageErrors.undefinedElement(e.output))}))})),r}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=n(0);r._defaultData=t.defaultData,r.validActions=t.validActions,r.validEvents=t.validEvents,r.validTimeUnits=t.validTimeUnits,r.validInterfaceElements=t.validInterfaceElements,r.validAppCmds=t.validAppCmds;var i=n(2);r._Type=i.Type,r._tokenize=i.tokenize,r._cleanCode=i.cleanCode,r._splitCode=i.splitCode,r._lineTokenizer=i.lineTokenizer,r._tokenizer=i.tokenizer;var o=n(3);r.codeParser=o.codeParser,r.semanticAnalyse=o.semanticAnalyse;var s=n(5);r.createMachine=s.createMachine,r.interpreter=s.interpreter;var a=n(1);r._isObj=a.isObj,r._isStr=a.isStr,r._isArr=a.isArr,r._merge=a.merge,r._cloneDeep=a.cloneDeep,r._messageErrors=a.messageErrors,r._getKeys=a.getKeys,r._convertTime=a.convertTime},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=n(1),i=n(0),o=n(3),s={initialized:!1,counters:{},intervals:{},variables:{},timer:-1,elapsed:0,history:[]},a=function(e,r){if(void 0===r&&(r=200),e.errors.length>0)return function(){return{error:t.messageErrors.codeError(e.errors),run:!1,data:e}};var n=t.cloneDeep(s),o=i.validAppCmds.concat(e.responses);n.timer=setInterval((function(){if(n.initialized){for(var e in n.intervals)e&&(n.intervals[e]+=-r,n.intervals[e]<0&&(n.intervals[e]=0));n.elapsed=Date.now()-n.history[0].at}}),r);var a=function(r){var i={error:"",run:!1,elapsed:n.elapsed,at:Date.now(),history:null};if(!o.includes(r))return i.error=t.messageErrors.invalidInput(r.toString()),i;switch(r){case"INIT":return n.initialized?(i.error=t.messageErrors.alreadyStarted(),i):(n.initialized=!0,e.controllers.forEach((function(e){n.counters[e.input]=0,e.runAfter.time&&(n.intervals[e.input]=t.convertTime(e.runAfter.time,e.runAfter.unit))})),i.run="INIT",n.history.push(t.cloneDeep(i)),i);case"RESET":return i.error="BUG",i;case"FINISH":return n.initialized?(i.run="FINISH",n.history.push(t.cloneDeep(i)),i.history=n.history,clearInterval(n.timer),i):(i.error=t.messageErrors.notAlreadyStarted(),i)}if(!n.initialized)return i.error=t.messageErrors.notAlreadyStarted(),i;n.counters[r]+=1;var s=[];return e.controllers.forEach((function(e){e.input==r&&(1==e.runAfter.attempts?s=e.output:e.runAfter.attemprs>1&&n.counters[r]==e.runAfter.attempts&&(n.counters[r]=0,s=e.output)),i.run=s})),s.length>0&&n.history.push(t.cloneDeep(i)),i};return a.state=n,a};r.createMachine=a;r.interpreter=function(e){var r=o.codeParser(e),n=o.semanticAnalyse(r);return a(n)}}]));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dvcmRib29rLnRzIiwid2VicGFjazovLy8uL3NyYy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9sZXhlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhcnNlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcnByZXRlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInZhbGlkSW50ZXJmYWNlRWxlbWVudHMiLCJ2YWxpZEFjdGlvbnMiLCJ2YWxpZEV2ZW50cyIsInZhbGlkVGltZVVuaXRzIiwidmFsaWRBcHBDbWRzIiwiZGVmYXVsdERhdGEiLCJldmVudHMiLCJpbml0IiwiZmluaXNoIiwiY2xpY2siLCJpbnRlcmZhY2UiLCJidXR0b24iLCJtZXNzYWdlIiwiY291bnRlciIsInNjcmVlbiIsImFjdGlvbnMiLCJlcnJvcnMiLCJjb250cm9sbGVycyIsInJlc3BvbnNlcyIsImdldEtleXMiLCJvYmoiLCJsaXN0IiwicHVzaCIsImlzT2JqIiwieCIsImNvbnN0cnVjdG9yIiwiaXNTdHIiLCJTdHJpbmciLCJpc0FyciIsIkFycmF5IiwiY2xvbmVEZWVwIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibWVyZ2UiLCJvYmpBIiwib2JqQiIsImlzTm90VW5pb24iLCJuZXdPYmoiLCJrZXlzQSIsImtleXNCIiwiZm9yRWFjaCIsImluY2x1ZGVzIiwiY29uY2F0IiwibWVzc2FnZUVycm9ycyIsImluTGluZSIsImVycm9yIiwiaW52YWxpZENvbW1hbmQiLCJsaW5lIiwiY21kIiwiaW52YWxpZEVsZW1lbnQiLCJlbGVtZW50IiwiaW52YWxpZFJlc3BvbnNlIiwicmVzcCIsImludmFsaWRDb25zZXF1ZW5jZSIsImludmFsaWRQb2ludHMiLCJpbnZhbGlkQ29udGluZ2VuY2UiLCJpbnZhbGlkQ29udGluZ2VuY2VJbnRlcnZhbCIsInVuZGVmaW5lZEVsZW1lbnQiLCJlbCIsImludmFsaWRJbnB1dCIsImlucHV0IiwiY29kZUVycm9yIiwiam9pbiIsImFscmVhZHlTdGFydGVkIiwibm90QWxyZWFkeVN0YXJ0ZWQiLCJidWciLCJjb252ZXJ0VGltZSIsInRpbWUiLCJ1bml0IiwiVHlwZSIsImNsZWFuQ29kZSIsImNvZGUiLCJyZXBsYWNlIiwic3BsaXRDb2RlIiwic3BsaXQiLCJmaWx0ZXIiLCJsaW5lVG9rZW5pemVyIiwiaW5kZXgiLCJ0b1JldHVybiIsInRleHQiLCJ0eXBlIiwiRXJyb3IiLCJ0ZXN0IiwiUmVzcG9uc2UiLCJDb25zZXF1ZW5jZSIsIkNvbnRpbmdlbmNlIiwiQ29uZGl0aW9uIiwidG9rZW5pemVyIiwibGluZXMiLCJtYXAiLCJ0b2tlbml6ZSIsImhhc0ludGVydmFsIiwiaGFzUmVhc29uIiwiaGFzTWFueSIsImNvZGVQYXJzZXIiLCJjb2RlRGF0YSIsImRhdGEiLCJwYXJ0cyIsInBhcnQxIiwicGFydDIiLCJldmVudCIsImxlbmd0aCIsImNvbW1hbmRzIiwiYWN0aW9uIiwiY29uc2VxdWVuY2VQYXJzZXIiLCJjb250cm9sbGVyIiwib3V0cHV0IiwicnVuQWZ0ZXIiLCJhdHRlbXB0cyIsInRpbWVVbml0IiwiY3RnIiwiUiIsIkMiLCJfIiwibnVtIiwiTnVtYmVyIiwibGlzdEMiLCJlIiwiY29udGluZ2VuY2VQYXJzZXIiLCJzZW1hbnRpY0FuYWx5c2UiLCJwYXJzZWRDb2RlIiwiY29uc2VxdWVuY2VzIiwib3V0cyIsIl9kZWZhdWx0RGF0YSIsIl9UeXBlIiwiX3Rva2VuaXplIiwiX2NsZWFuQ29kZSIsIl9zcGxpdENvZGUiLCJfbGluZVRva2VuaXplciIsIl90b2tlbml6ZXIiLCJjcmVhdGVNYWNoaW5lIiwiaW50ZXJwcmV0ZXIiLCJfaXNPYmoiLCJfaXNTdHIiLCJfaXNBcnIiLCJfbWVyZ2UiLCJfY2xvbmVEZWVwIiwiX21lc3NhZ2VFcnJvcnMiLCJfZ2V0S2V5cyIsIl9jb252ZXJ0VGltZSIsImRlZmF1bHRTdGF0ZSIsImluaXRpYWxpemVkIiwiY291bnRlcnMiLCJpbnRlcnZhbHMiLCJ2YXJpYWJsZXMiLCJ0aW1lciIsImVsYXBzZWQiLCJoaXN0b3J5IiwiaW50ZXJ2YWwiLCJydW4iLCJzdGF0ZSIsInZhbGlkSW5wdXRzIiwic2V0SW50ZXJ2YWwiLCJEYXRlIiwibm93IiwiYXQiLCJtYWNoaW5lIiwidG9TdHJpbmciLCJjdHJsIiwiY2xlYXJJbnRlcnZhbCIsImNvbnNlcXVlbmNlIiwiYXR0ZW1wcnMiXSwibWFwcGluZ3MiOiI2REFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUEwRGYsT0FyREFGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxP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QVNzRCxTQUFXLEdBQ3pCWCxFQUFNUixTQUFTbEYsSUFBVWtHLEVBQUtuRCxTQUFTQyxXQUV2QzBDLEVBQU1SLFNBQVNsRixHQUFTLEVBQ3hCb0csRUFBY0YsRUFBS3BELFNBRzNCNUIsRUFBU3VFLElBQU1XLEtBR2ZBLEVBQVkzRCxPQUFTLEdBQ3JCaUQsRUFBTUgsUUFBUTlILEtBQUssRUFBQVEsVUFBVWlELElBRTFCQSxHQUlYLE9BREE4RSxFQUFRTixNQUFRQSxFQUNUTSxHQVNGLEVBQUExQixnQkFBZSxFQUFBQyxZQU5KLFNBQUM1RCxHQUNqQixJQUFNaUQsRUFBYSxFQUFBMUIsV0FBV3ZCLEdBQ3hCeUIsRUFBTyxFQUFBdUIsZ0JBQWdCQyxHQUM3QixPQUFPVSxFQUFjbEMiLCJmaWxlIjoicGF2bGFuZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsIi8qIEVsZW1lbnRvcyB2w6FsaWRvcyAqL1xyXG5jb25zdCB2YWxpZEludGVyZmFjZUVsZW1lbnRzID0gWyAnc2NyZWVuJywgJ2J1dHRvbicsICdtZXNzYWdlJywgJ2FwcCcsICdjb3VudGVyJyBdO1xyXG5jb25zdCB2YWxpZEFjdGlvbnMgPSBbJ3Nob3cnLCAnZW5hYmxlJywgJ2Rpc2FibGUnLCAnaGlkZScsICdyZXNldCcsICdmaW5pc2gnXTtcclxuY29uc3QgdmFsaWRFdmVudHMgPSBbJ2NsaWNrJywgJ2luaXQnLCAnZmluaXNoJ107XHJcbmNvbnN0IHZhbGlkVGltZVVuaXRzID0gWydzJywgJ20nLCAnbXMnXTtcclxuY29uc3QgdmFsaWRBcHBDbWRzID0gWydJTklUJywgJ1JFU0VUJywnRklOSVNIJ107XHJcblxyXG4vKlxyXG4gQ29uanVudG8gcGFkcsOjbyBjb20gdG9kb3Mgb3MgZGFkb3MgZGEgYXBsaWNhw6fDo28sIGN1aWRhZG8gYW8gYWx0ZXJhclxyXG4gKi9cclxuXHJcbmludGVyZmFjZSBEYXRhVHlwZSB7XHJcbiAgICBldmVudHM6IG9iamVjdCxcclxuICAgIGludGVyZmFjZTogb2JqZWN0LFxyXG4gICAgYWN0aW9uczogb2JqZWN0LFxyXG4gICAgZXJyb3JzOiBzdHJpbmdbXSxcclxuICAgIGNvbnRyb2xsZXJzOiBvYmplY3RbXSxcclxuICAgIHJlc3BvbnNlczogc3RyaW5nW11cclxufTtcclxuXHJcbmNvbnN0IGRlZmF1bHREYXRhOkRhdGFUeXBlID0ge1xyXG4gICAgZXZlbnRzOnsgaW5pdDpbXSwgZmluaXNoOiBbXSwgY2xpY2s6W10gfSxcclxuICAgIGludGVyZmFjZTogeyBidXR0b246W10sIG1lc3NhZ2U6W10sIGNvdW50ZXI6W10sIHNjcmVlbjogW10gfSxcclxuICAgIGFjdGlvbnM6IHt9LFxyXG4gICAgZXJyb3JzOiBbXSxcclxuICAgIGNvbnRyb2xsZXJzOiBbXSxcclxuICAgIHJlc3BvbnNlczogW11cclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgICBEYXRhVHlwZSxcclxuICAgIGRlZmF1bHREYXRhLFxyXG4gICAgdmFsaWRBY3Rpb25zLFxyXG4gICAgdmFsaWRFdmVudHMsXHJcbiAgICB2YWxpZFRpbWVVbml0cyxcclxuICAgIHZhbGlkSW50ZXJmYWNlRWxlbWVudHMsXHJcbiAgICB2YWxpZEFwcENtZHNcclxufSIsImNvbnN0IGdldEtleXMgPSAob2JqOiBvYmplY3QpOiBzdHJpbmdbXSA9PiB7XHJcbiAgbGV0IGxpc3QgPSBbXTtcclxuICBmb3IobGV0IGtleSBpbiBvYmopXHJcbiAgICBpZihrZXkpXHJcbiAgICAgIGxpc3QucHVzaChrZXkpO1xyXG4gIHJldHVybiBsaXN0O1xyXG59XHJcblxyXG5jb25zdCBpc09iaiA9ICh4OmFueSkgPT4ge1xyXG4gIHJldHVybiB4ICYmIHguY29uc3RydWN0b3IgPT0gT2JqZWN0O1xyXG59XHJcblxyXG5jb25zdCBpc1N0ciA9ICh4OmFueSkgPT4ge1xyXG4gIHJldHVybiB4ICYmIHguY29uc3RydWN0b3IgPT0gU3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBpc0FyciA9ICh4OmFueSkgPT4ge1xyXG4gIHJldHVybiB4ICYmIHguY29uc3RydWN0b3IgPT0gQXJyYXk7XHJcbn1cclxuXHJcbmNvbnN0IGNsb25lRGVlcCA9IChvYmo6IG9iamVjdCkgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcclxuXHJcbi8qIEZ1bsOnw6NvIHBhcmEgbWVyZ2VhciBvcyBkYWRvcyBhbnRpZ29zIGUgb3Mgbm92b3MgZG8gY29kZVBhcnNlciAqL1xyXG5jb25zdCBtZXJnZSA9IChvYmpBOiBhbnksIG9iakI6IGFueSwgaXNOb3RVbmlvbj86IGJvb2xlYW4pID0+IHtcclxuICAvKiBTZSB1bSBkb3Mgb2JqZXRvcyBmb3IgaW52w6FsaWRvIHJldG9ybmEgbyBvdXRybyAqL1xyXG4gIGlmKCAhb2JqQSAmJiAhb2JqQiApIHJldHVybiBudWxsO1xyXG4gIGlmKCAhb2JqQSApIHJldHVybiBvYmpCO1xyXG4gIGlmKCAhb2JqQiApIHJldHVybiBvYmpBO1xyXG4gIFxyXG4gIGlmKCBpc09iaihvYmpBKSAmJiBpc09iaihvYmpCKSApe1xyXG4gICAgdmFyIG5ld09iajogYW55ID0ge307XHJcbiAgICB2YXIga2V5c0E6IEFycmF5PHN0cmluZz4gPSBnZXRLZXlzKG9iakEpO1xyXG4gICAgdmFyIGtleXNCOiBBcnJheTxzdHJpbmc+ID0gZ2V0S2V5cyhvYmpCKTtcclxuICAgIFxyXG4gICAga2V5c0EuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgIG5ld09ialtrZXldID0gbWVyZ2Uob2JqQVtrZXldLCBvYmpCW2tleV0sIGlzTm90VW5pb24pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGtleXNCLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICBpZiggIWtleXNBLmluY2x1ZGVzKGtleSkgKXtcclxuICAgICAgICBuZXdPYmpba2V5XSA9IG1lcmdlKG9iakFba2V5XSwgb2JqQltrZXldLCBpc05vdFVuaW9uKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBuZXdPYmo7XHJcbiAgICBcclxuICAgIC8qIFNlIGZvciBsaXN0YSBmYXogdW1hIHVuacOjbyBvdSBjb25jYXRlbmEgKi9cclxuICB9IGVsc2UgaWYoIGlzQXJyKG9iakEpICYmIGlzQXJyKG9iakIpICl7XHJcbiAgICBsZXQgbmV3QXJyOiBhbnlbXTtcclxuICAgIGlmKGlzTm90VW5pb24gKXtcclxuICAgICAgbmV3QXJyID0gb2JqQS5jb25jYXQob2JqQik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuZXdBcnIgPSBbLi4ub2JqQV07XHJcbiAgICAgIG9iakIuZm9yRWFjaCgoeDogYW55KSA9PiB7XHJcbiAgICAgICAgaWYoIW5ld0Fyci5pbmNsdWRlcyh4KSlcclxuICAgICAgICAgIG5ld0Fyci5wdXNoKHgpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld0FycjtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIG9iakI7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gTWVuc2FnZW5zIGRlIGVycm8gcGFyYSBjYWRhIHRpcG8gZGUgZXJyb1xyXG4gKi9cclxuXHJcbmNvbnN0IG1lc3NhZ2VFcnJvcnMgPSB7XHJcbiAgaW5MaW5lOiAoZXJyb3I6IHN0cmluZykgPT4gYEVycm8gbmEgbGluaGEgJHtlcnJvcn1gLFxyXG5cclxuICBpbnZhbGlkQ29tbWFuZDogKGxpbmU6IHN0cmluZywgY21kOnN0cmluZykgPT4gYFNpbnRheGUgaW5jb3JyZXRhOiAke2xpbmV9XHJcbkNvbWFuZG8gXCIke2NtZH1cIiBuw6NvIGlkZW50aWZpY2Fkby5gLFxyXG4gIGludmFsaWRFbGVtZW50OiAobGluZTpzdHJpbmcsIGVsZW1lbnQ6c3RyaW5nKSA9PiBgU2ludGF4ZSBpbmNvcnJldGE6ICR7bGluZX1cclxuRWxlbWVudG8gXCIke2VsZW1lbnR9XCIgaW52w6FsaWRvLmAsXHJcbiAgaW52YWxpZFJlc3BvbnNlOiAobGluZTpzdHJpbmcsIHJlc3A6c3RyaW5nKSA9PiBgU2ludGF4ZSBpbmNvcnJldGE6ICR7bGluZX1cclxuUmVzcG9zdGEgXCIke3Jlc3B9XCIgaW52w6FsaWRhLmAsXHJcbiAgaW52YWxpZENvbnNlcXVlbmNlOiAobGluZTpzdHJpbmcsIHJlc3A6c3RyaW5nKSA9PiBgU2ludGF4ZSBpbmNvcnJldGE6ICR7bGluZX1cclxuQ29uc2VxdcOqbmNpYSBcIiR7cmVzcH1cIiBpbnbDoWxpZGEuYCxcclxuICBpbnZhbGlkUG9pbnRzOiAobGluZTpzdHJpbmcpID0+IGBTaW50YXhlIGluY29ycmV0YTogJHtsaW5lfVxyXG5BIHF1YW50aWRhZGUgZGUgcG9udG9zIHBhcmVjZSBpbmNvcnJldGEuYCxcclxuICBpbnZhbGlkQ29udGluZ2VuY2U6IChsaW5lOnN0cmluZykgPT4gYFNpbnRheGUgaW5jb3JyZXRhOiAke2xpbmV9XHJcbkNvbnRpbmfDqm5jaWEgXCIke2xpbmV9XCIgaW52w6FsaWRhLmAsXHJcbiAgaW52YWxpZENvbnRpbmdlbmNlSW50ZXJ2YWw6IChsaW5lOnN0cmluZykgPT4gYFNpbnRheGUgaW5jb3JyZXRhOiAke2xpbmV9XHJcbkludGVydmFsbyBkZSBjb250aW5nw6puY2lhIGludsOhbGlkbzogXCIke2xpbmV9XCJgLFxyXG5cclxuICB1bmRlZmluZWRFbGVtZW50OiAoZWw6c3RyaW5nKSA9PiBgRXJybyBzZW3Dom50aWNvLCBvIGVsZW1lbnRvIFwiJHtlbH1cIiBuw6NvIGV4aXN0ZWAsXHJcblxyXG4gIGludmFsaWRJbnB1dDogKGlucHV0OnN0cmluZykgPT4gYEVudHJhZGEgaW52w6FsaWRhICR7aW5wdXR9YCxcclxuXHJcbiAgY29kZUVycm9yOiAoZXJyb3JzOnN0cmluZ1tdKSA9PiBgRXJybyBubyBjw7NkaWdvOlxyXG4gICR7ZXJyb3JzLmpvaW4oJ1xcbicpfWAsXHJcblxyXG4gIGFscmVhZHlTdGFydGVkOiAoKSA9PiBgTyBhcHAgasOhIGZvaSBpbmljaWFkb2AsXHJcbiAgbm90QWxyZWFkeVN0YXJ0ZWQ6ICgpID0+IGBPIGFwcCBuw6NvIGZvaSBpbmljaWFkb2AsXHJcblxyXG4gIGJ1ZzogKGxpbmU6c3RyaW5nKSA9PiBgRXJybyBjYXRhc3Ryw7NmaWNvISAke2xpbmV9YCxcclxuICBcclxufTtcclxuXHJcbmNvbnN0IGNvbnZlcnRUaW1lID0gKHRpbWU6bnVtYmVyLCB1bml0OnN0cmluZykgPT4ge1xyXG4gIHN3aXRjaCh1bml0KXtcclxuICAgIGNhc2UgJ21zJzogcmV0dXJuIHRpbWU7XHJcbiAgICBjYXNlICdzJzogcmV0dXJuIHRpbWUgKiAxMDAwO1xyXG4gICAgY2FzZSAnbSc6IHJldHVybiB0aW1lICogNjAwMDA7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IHsgaXNPYmosIGlzU3RyLCBpc0FyciwgbWVyZ2UsIGNsb25lRGVlcCwgbWVzc2FnZUVycm9ycywgZ2V0S2V5cywgY29udmVydFRpbWUgfSIsIi8vIFRpcG9zIGRlIGRlY2xhcmHDp8OjbyBlIG1lbnNhZ2Vuc1xyXG5lbnVtIFR5cGUge1xyXG4gICAgUmVzcG9uc2UsIENvbnRpbmdlbmNlLCBDb25zZXF1ZW5jZSwgQ29uZGl0aW9uLCBFcnJvclxyXG59XHJcblxyXG4vLyBSZXRpcmEgcXVlYnJhcyBkZSBsaW5oYXMsIGVzcGHDp29zIGUgY29tZW50w6FyaW9zXHJcbmNvbnN0IGNsZWFuQ29kZSA9IChjb2RlOiBzdHJpbmcpID0+IGNvZGUucmVwbGFjZSgvXFwjLitcXG4vZywgXCJcXG5cIikucmVwbGFjZSgvICsvZywgXCJcIikucmVwbGFjZSgvXFxuezIsfS9nLCBcIlxcblwiKTtcclxuLy8gUXVlYnJhIG8gY8OzZGlnbyBwZWxhcyBsaW5oYXMgZSBleGNsdWkgYXMgbGluaGFzIHZhemlhc1xyXG5jb25zdCBzcGxpdENvZGUgPSAoY29kZTogc3RyaW5nKSA9PiBjb2RlLnNwbGl0KC9cXG4vZykuZmlsdGVyKChuKSA9PiBuKTtcclxuXHJcbi8vIFJldG9ybmEgbyB0aXBvIGRlIGNhZGEgbGluaGEgKFJFU1BPTlNFLCBDT05USU5HRU5DRSwgQ09OU0VRVUVOQ0UsIENPTkRJVElPTiwgRVJST1IpXHJcbmNvbnN0IGxpbmVUb2tlbml6ZXIgPSAobGluZTpzdHJpbmcsIGluZGV4Om51bWJlcikgPT4ge1xyXG4gICAgbGV0IHRvUmV0dXJuID0geyB0ZXh0OiBsaW5lLCB0eXBlOiBUeXBlLkVycm9yIH07XHJcblxyXG4gICAgaWYoIC9eUlxcZCs9Ly50ZXN0KGxpbmUpIClcclxuICAgICAgICB0b1JldHVybi50eXBlID0gVHlwZS5SZXNwb25zZTtcclxuICAgIGVsc2UgaWYoIC9eQ1xcZCs9Ly50ZXN0KGxpbmUpIClcclxuICAgICAgICB0b1JldHVybi50eXBlID0gVHlwZS5Db25zZXF1ZW5jZTtcclxuICAgIGVsc2UgaWYoIC9eJlxcZCs9Ly50ZXN0KGxpbmUpIClcclxuICAgICAgICB0b1JldHVybi50eXBlID0gVHlwZS5Db250aW5nZW5jZTtcclxuICAgIGVsc2UgaWYoIC9eQFxcZCs9Ly50ZXN0KGxpbmUpIClcclxuICAgICAgICB0b1JldHVybi50eXBlID0gVHlwZS5Db25kaXRpb247XHJcbiAgICBcclxuICAgIHJldHVybiB0b1JldHVybjsgXHJcbn07XHJcbi8vIERlZmluZSBvcyB0aXBvcyBkZSBjYWRhIGxpbmhhXHJcbmNvbnN0IHRva2VuaXplciA9IChsaW5lczpzdHJpbmdbXSkgPT4gbGluZXMubWFwKChsaW5lLCBpbmRleCkgPT4gbGluZVRva2VuaXplcihsaW5lLCBpbmRleCkpO1xyXG5cclxuY29uc3QgdG9rZW5pemUgPSAoY29kZTpzdHJpbmcpID0+IHRva2VuaXplcihzcGxpdENvZGUoY2xlYW5Db2RlKGNvZGUpKSk7XHJcblxyXG5leHBvcnQgeyBUeXBlLCB0b2tlbml6ZSwgY2xlYW5Db2RlLCBzcGxpdENvZGUsIGxpbmVUb2tlbml6ZXIsIHRva2VuaXplciB9IiwiaW1wb3J0IHsgVHlwZSB9IGZyb20gJy4vbGV4ZXJzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBtZXNzYWdlRXJyb3JzLFxyXG4gICAgY2xvbmVEZWVwLFxyXG4gICAgbWVyZ2UsXHJcbiAgICBnZXRLZXlzXHJcbn0gZnJvbSAnLi9oZWxwZXJzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkZWZhdWx0RGF0YSxcclxuICAgIHZhbGlkVGltZVVuaXRzLFxyXG4gICAgdmFsaWRBY3Rpb25zLFxyXG4gICAgdmFsaWRFdmVudHMsXHJcbiAgICB2YWxpZEludGVyZmFjZUVsZW1lbnRzXHJcbn0gZnJvbSAnLi93b3JkYm9vayc7XHJcblxyXG5jb25zdCByZXNwb25zZVBhcnNlciA9IChjb2RlOnN0cmluZykgPT4ge1xyXG4gICAgdmFyIHBhcnRzID0gY29kZS5zcGxpdCgnPScpO1xyXG4gICAgY29uc3QgcGFydDEgPSBwYXJ0c1swXTtcclxuICAgIGNvbnN0IHBhcnQyID0gcGFydHNbMV0uc3BsaXQoJy4nKTsgXHJcblxyXG4gICAgY29uc3QgZWxlbWVudCA9IHBhcnQyWzBdO1xyXG4gICAgY29uc3QgbmFtZSA9IHBhcnQyWzFdO1xyXG4gICAgY29uc3QgZXZlbnQgPSBwYXJ0MlsyXTtcclxuXHJcbiAgICB2YXIgdG9SZXR1cm4gPSBjbG9uZURlZXAoZGVmYXVsdERhdGEpO1xyXG4gICAgLypcclxuICAgICAgICBFWEVNUExPIDE6IGJ1dHRvbi5hbWFyZWxvLmNsaWNrXHJcbiAgICAgICAgcGFydDJbMF0gPSBidXR0b24gKGVsZW1lbnQpXHJcbiAgICAgICAgcGFydDJbMV0gPSBhbWFyZWxvIChpZClcclxuICAgICAgICBwYXJ0MlsyXSA9IGNsaWNrIChldmVudClcclxuXHJcbiAgICAgICAgRVhFTVBMTyAyOiBhcHAuaW5pdFxyXG4gICAgICAgIHBhcnQyWzBdID0gYXBwXHJcbiAgICAgICAgcGFydDJbMV0gPSBpbml0XHJcbiAgICAqL1xyXG4gICAgaWYocGFydDIubGVuZ3RoID09IDIpe1xyXG4gICAgICAgIGlmKCAhdmFsaWRFdmVudHMuaW5jbHVkZXMocGFydDJbMV0pIClcclxuICAgICAgICAgICAgdG9SZXR1cm4uZXJyb3JzLnB1c2gobWVzc2FnZUVycm9ycy5pbnZhbGlkQ29tbWFuZChjb2RlLCBwYXJ0MlsxXSkpO1xyXG4gICAgICAgIGVsc2UgXHJcbiAgICAgICAgICAgIHRvUmV0dXJuLmV2ZW50c1twYXJ0MlsxXV0ucHVzaChwYXJ0MSk7XHJcbiAgICB9IGVsc2UgaWYocGFydDIubGVuZ3RoID09IDMpe1xyXG4gICAgICAgIGlmKCAhdmFsaWRJbnRlcmZhY2VFbGVtZW50cy5pbmNsdWRlcyhlbGVtZW50KSApXHJcbiAgICAgICAgICAgIHRvUmV0dXJuLmVycm9ycy5wdXNoKG1lc3NhZ2VFcnJvcnMuaW52YWxpZEVsZW1lbnQoY29kZSwgZWxlbWVudCkpO1xyXG4gICAgICAgIGVsc2UgaWYgKCAhdmFsaWRFdmVudHMuaW5jbHVkZXMoZXZlbnQpIClcclxuICAgICAgICAgICAgdG9SZXR1cm4uZXJyb3JzLnB1c2gobWVzc2FnZUVycm9ycy5pbnZhbGlkUmVzcG9uc2UoY29kZSwgZXZlbnQpKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdG9SZXR1cm4uZXZlbnRzW2V2ZW50XS5wdXNoKGAke25hbWV9OiR7cGFydDF9YCk7XHJcbiAgICAgICAgICAgIGlmKCAhdG9SZXR1cm4uaW50ZXJmYWNlW2VsZW1lbnRdLmluY2x1ZGVzKG5hbWUpICl7XHJcbiAgICAgICAgICAgICAgICB0b1JldHVybi5pbnRlcmZhY2VbZWxlbWVudF0ucHVzaChuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gXHJcbiAgICB9IGVsc2UgXHJcbiAgICAgICAgdG9SZXR1cm4uZXJyb3JzLnB1c2gobWVzc2FnZUVycm9ycy5pbnZhbGlkUG9pbnRzKGNvZGUpKTtcclxuICAgIFxyXG4gICAgaWYoICF0b1JldHVybi5yZXNwb25zZXMuaW5jbHVkZXMocGFydDEpIClcclxuICAgICAgICB0b1JldHVybi5yZXNwb25zZXMucHVzaChwYXJ0MSk7XHJcblxyXG4gICAgcmV0dXJuIHRvUmV0dXJuO1xyXG59XHJcblxyXG5jb25zdCBjb25zZXF1ZW5jZVBhcnNlciA9IChjb2RlOnN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgcGFydHMgPSBjb2RlLnNwbGl0KCc9Jyk7XHJcbiAgICBjb25zdCBwYXJ0MSA9IHBhcnRzWzBdO1xyXG4gICAgdmFyIHRvUmV0dXJuID0gY2xvbmVEZWVwKGRlZmF1bHREYXRhKTtcclxuXHJcbiAgICB2YXIgY29tbWFuZHMgPSBwYXJ0c1sxXS5zcGxpdCgnfCcpLm1hcCgoY21kKSA9PiBjbWQuc3BsaXQoJy4nKSk7XHJcblxyXG4gICAgdG9SZXR1cm4uYWN0aW9uc1twYXJ0MV0gPSBbXTtcclxuICAgIFxyXG4gICAgY29tbWFuZHMuZm9yRWFjaCgoY21kKSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjbWRbMF07XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IGNtZFsxXTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSBjbWRbMl07XHJcblxyXG4gICAgICAgIGlmKGNtZC5sZW5ndGggPT0gMil7XHJcbiAgICAgICAgICAgIGlmKCAhdmFsaWRBY3Rpb25zLmluY2x1ZGVzKGNtZFsxXSkgKVxyXG4gICAgICAgICAgICAgICAgdG9SZXR1cm4uZXJyb3JzLnB1c2gobWVzc2FnZUVycm9ycy5pbnZhbGlkQ29tbWFuZChjb2RlLCBjbWRbMV0pKTtcclxuICAgICAgICAgICAgZWxzZSBcclxuICAgICAgICAgICAgICAgIHRvUmV0dXJuLmFjdGlvbnNbcGFydDFdLnB1c2goYGFwcDoke2NtZFsxXX1gKTtcclxuICAgICAgICB9IGVsc2UgaWYoY21kLmxlbmd0aCA9PSAzKXtcclxuICAgICAgICAgICAgaWYoICF2YWxpZEFjdGlvbnMuaW5jbHVkZXMoYWN0aW9uKSApe1xyXG4gICAgICAgICAgICAgICAgdG9SZXR1cm4uZXJyb3JzLnB1c2gobWVzc2FnZUVycm9ycy5pbnZhbGlkQ29uc2VxdWVuY2UoY29kZSwgYWN0aW9uKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0b1JldHVybi5hY3Rpb25zW3BhcnQxXS5wdXNoKGAke25hbWV9OiR7YWN0aW9ufWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhdG9SZXR1cm4uaW50ZXJmYWNlW2VsZW1lbnRdLmluY2x1ZGVzKG5hbWUpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9SZXR1cm4uaW50ZXJmYWNlW2VsZW1lbnRdLnB1c2gobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgdG9SZXR1cm4uZXJyb3JzLnB1c2gobWVzc2FnZUVycm9ycy5pbnZhbGlkUG9pbnRzKGNvZGUpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0b1JldHVybjtcclxufVxyXG4vKiBSZWdleHAgc2ltcGxlcyBxdWUgZGVpeGEgcGFzc2FyIHVtIGNhc29cclxuICAgZXJyYWRvIHF1ZSDDqSAtNXNtLT5cclxuKi9cclxuY29uc3QgaGFzSW50ZXJ2YWwgPSAvLShcXGQrKShbbXNdezEsMn0pJC87XHJcbmNvbnN0IGhhc1JlYXNvbiA9IC9cXCooXFxkKykkLztcclxuY29uc3QgaGFzTWFueSA9IC9cXHwvO1xyXG5cclxuaW50ZXJmYWNlIENvbnRpbmdlbmNlVHlwZSB7XHJcbiAgICBpbnB1dDogc3RyaW5nLFxyXG4gICAgb3V0cHV0Pzogc3RyaW5nW10sXHJcbiAgICBydW5BZnRlcjogYW55XHJcbn07XHJcblxyXG5jb25zdCBjb250aW5nZW5jZVBhcnNlciA9IChjb2RlOiBzdHJpbmcpID0+IHtcclxuICAgIGxldCB0b1JldHVybiA9IGNsb25lRGVlcChkZWZhdWx0RGF0YSk7XHJcbiAgICBsZXQgY29udHJvbGxlcjogQ29udGluZ2VuY2VUeXBlID0ge1xyXG4gICAgICAgIGlucHV0OiAnJyxcclxuICAgICAgICBvdXRwdXQ6IG51bGwsXHJcbiAgICAgICAgcnVuQWZ0ZXI6IHtcclxuICAgICAgICAgICAgYXR0ZW1wdHM6IDEsXHJcbiAgICAgICAgICAgIHRpbWU6IDAsXHJcbiAgICAgICAgICAgIHRpbWVVbml0OiBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgY3RnID0gY29kZS5zcGxpdCgnPScpWzFdLnNwbGl0KC8tPi8pO1xyXG4gICAgICAgIGxldCBSID0gY3RnWzBdO1xyXG4gICAgICAgIGxldCBDID0gY3RnWzFdO1xyXG4gICAgICAgIC8qIFRyYXRhbWVudG8gZGEgUmVzcG9zdGEgKFIpICovXHJcbiAgICAgICAgLyogU2UgaG91dmVyIHVtIGluZGljYWRvciBkZSBpbnRlcnZhbG8gKi9cclxuICAgICAgICBpZiggaGFzSW50ZXJ2YWwudGVzdChSKSApe1xyXG4gICAgICAgICAgICBSID0gUi5yZXBsYWNlKGhhc0ludGVydmFsLCAoXywgbnVtLCB1bml0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSBOdW1iZXIobnVtKTtcclxuICAgICAgICAgICAgICAgIGlmKCBudW0gJiYgdmFsaWRUaW1lVW5pdHMuaW5jbHVkZXModW5pdCkgKXtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnJ1bkFmdGVyLnRpbWUgPSBudW07XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5ydW5BZnRlci50aW1lVW5pdCA9IHVuaXQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvUmV0dXJuLmVycm9ycy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRXJyb3JzLmludmFsaWRDb250aW5nZW5jZUludGVydmFsKGNvZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogU2UgaG91dmVyIHVtIGluZGljYWRvciBkZSBxdWFudGlkYWRlIChyYXrDo28pICovXHJcbiAgICAgICAgaWYoIGhhc1JlYXNvbi50ZXN0KFIpICl7XHJcbiAgICAgICAgICAgIFIgPSBSLnJlcGxhY2UoaGFzUmVhc29uLCAoXywgbnVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSBOdW1iZXIobnVtKTtcclxuICAgICAgICAgICAgICAgIGlmKCBudW0gKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucnVuQWZ0ZXIuYXR0ZW1wdHMgPSBudW1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvUmV0dXJuLmVycm9ycy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRXJyb3JzLmludmFsaWRDb250aW5nZW5jZUludGVydmFsKGNvZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogQXDDs3MgdGVyIGxpbXBhZG8gYSBzdHJpbmcsIHNvYnJhIGFwZW5hcyBhIHJlc3Bvc3RhIGRlIGVudHJhZGEgKi9cclxuICAgICAgICBjb250cm9sbGVyLmlucHV0ID0gUjtcclxuXHJcbiAgICAgICAgLyogVHJhdGFtZW50byBkYSBDb25zZXF1w6puY2lhIChDKSAqL1xyXG4gICAgICAgIC8qIFNlIGhvdXZlciB2w6FyaWFzIGNvbnNlcXXDqm5jaWFzIHBhcmEgZXNzYSByZXNwb3N0YSxcclxuICAgICAgICB0cmFuc2Zvcm1hIFwiQ1wiIGVtIGxpc3RhICovXHJcbiAgICAgICAgbGV0IGxpc3RDIDogc3RyaW5nW107XHJcbiAgICAgICAgaWYoIGhhc01hbnkudGVzdChDKSApXHJcbiAgICAgICAgICAgIGxpc3RDID0gQy5zcGxpdCgnfCcpO1xyXG4gICAgICAgIGVsc2UgXHJcbiAgICAgICAgICAgIGxpc3RDID0gW0NdO1xyXG5cclxuICAgICAgICBjb250cm9sbGVyLm91dHB1dCA9IGxpc3RDO1xyXG4gICAgICAgIHRvUmV0dXJuLmNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XHJcbiAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICB0b1JldHVybi5lcnJvcnMucHVzaChtZXNzYWdlRXJyb3JzLmludmFsaWRDb250aW5nZW5jZShjb2RlKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG9SZXR1cm47XHJcbn1cclxuXHJcbmNvbnN0IGNvZGVQYXJzZXIgPSAobGluZXM6IGFueSkgPT4ge1xyXG4gICAgdmFyIGNvZGVEYXRhID0gY2xvbmVEZWVwKGRlZmF1bHREYXRhKTtcclxuICAgIGxpbmVzLmZvckVhY2goKGxpbmU6YW55KSA9PiB7XHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgc3dpdGNoKGxpbmUudHlwZSl7XHJcbiAgICAgICAgICAgIGNhc2UgVHlwZS5SZXNwb25zZTpcclxuICAgICAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZVBhcnNlcihsaW5lLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVHlwZS5Db25zZXF1ZW5jZTpcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBjb25zZXF1ZW5jZVBhcnNlcihsaW5lLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVHlwZS5Db250aW5nZW5jZTpcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBjb250aW5nZW5jZVBhcnNlcihsaW5lLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVHlwZS5FcnJvcjpcclxuICAgICAgICAgICAgICAgIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzOiBjb2RlRGF0YS5lcnJvcnMuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbWVzc2FnZUVycm9ycy5pbkxpbmUobGluZS50ZXh0KV1cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCAhZGF0YSApe1xyXG4gICAgICAgICAgICAvKiBTaXR1YcOnw6NvIG7Do28gcHJldmlzdGEgcGVsbyBjb21waWxhZG9yLCBnZXJhIGVycm8gKi9cclxuICAgICAgICAgICAgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGVycm9yczogY29kZURhdGEuZXJyb3JzLmNvbmNhdChcclxuICAgICAgICAgICAgICAgICAgICBbbWVzc2FnZUVycm9ycy5idWcobGluZS50ZXh0KV1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvKiBDYXNvIHNhaWEgdHVkbyBiZW0sIGZheiB1bSBtZXJnZSBlbnRyZSBvcyBkYWRvcyBhbnRpZ29zIGUgb3MgcGFyc2VhZG9zIGFnb3JhICovXHJcbiAgICAgICAgICAgIGNvZGVEYXRhID0gbWVyZ2UoY29kZURhdGEsIGRhdGEpOyAgICBcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBjb2RlRGF0YTtcclxufVxyXG5cclxuLyogVmVyaWZpY2Egc2UgZXhpc3RlIGFsZ3VtIGVsZW1lbnRvIHNlbmRvIGNoYW1hZG8gbmFzIGNvbnRpbmfDqm5jaWFzIHF1ZSBuw6NvIGV4aXN0ZSBubyBjw7NkaWdvICovXHJcbmNvbnN0IHNlbWFudGljQW5hbHlzZSA9IChwYXJzZWRDb2RlOmFueSkgPT4ge1xyXG4gICAgbGV0IHRvUmV0dXJuID0gY2xvbmVEZWVwKHBhcnNlZENvZGUpO1xyXG4gICAgY29uc3QgY29uc2VxdWVuY2VzID0gZ2V0S2V5cyh0b1JldHVybi5hY3Rpb25zKTtcclxuICAgIHBhcnNlZENvZGUuY29udHJvbGxlcnMuZm9yRWFjaCgob2JqOmFueSkgPT4ge1xyXG4gICAgICAgIGlmKCAhdG9SZXR1cm4ucmVzcG9uc2VzLmluY2x1ZGVzKG9iai5pbnB1dCkgKVxyXG4gICAgICAgICAgICB0b1JldHVybi5lcnJvcnMucHVzaChtZXNzYWdlRXJyb3JzLnVuZGVmaW5lZEVsZW1lbnQob2JqLmlucHV0KSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgb2JqLm91dHB1dC5mb3JFYWNoKChvdXRzOmFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiggIWNvbnNlcXVlbmNlcy5pbmNsdWRlcyhvdXRzKSApXHJcbiAgICAgICAgICAgICAgICB0b1JldHVybi5lcnJvcnMucHVzaChtZXNzYWdlRXJyb3JzLnVuZGVmaW5lZEVsZW1lbnQob2JqLm91dHB1dCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdG9SZXR1cm47XHJcbn1cclxuXHJcbmV4cG9ydCB7IGNvZGVQYXJzZXIsIHNlbWFudGljQW5hbHlzZSB9OyIsImltcG9ydCB7XHJcbiAgICBkZWZhdWx0RGF0YSxcclxuICAgIHZhbGlkQWN0aW9ucyxcclxuICAgIHZhbGlkRXZlbnRzLFxyXG4gICAgdmFsaWRUaW1lVW5pdHMsXHJcbiAgICB2YWxpZEludGVyZmFjZUVsZW1lbnRzLFxyXG4gICAgdmFsaWRBcHBDbWRzXHJcbn0gZnJvbSAnLi93b3JkYm9vayc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgVHlwZSxcclxuICAgIHRva2VuaXplLFxyXG4gICAgY2xlYW5Db2RlLFxyXG4gICAgc3BsaXRDb2RlLFxyXG4gICAgbGluZVRva2VuaXplcixcclxuICAgIHRva2VuaXplclxyXG59IGZyb20gJy4vbGV4ZXJzJztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgY29kZVBhcnNlcixcclxuICAgIHNlbWFudGljQW5hbHlzZVxyXG59IGZyb20gJy4vcGFyc2Vycyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY3JlYXRlTWFjaGluZSxcclxuICAgIGludGVycHJldGVyXHJcbn0gZnJvbSAnLi9pbnRlcnByZXRlcic7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaXNPYmosIGlzU3RyLCBpc0FycixcclxuICAgIG1lcmdlLCBjbG9uZURlZXAsIG1lc3NhZ2VFcnJvcnMsXHJcbiAgICBnZXRLZXlzLCBjb252ZXJ0VGltZVxyXG59IGZyb20gJy4vaGVscGVycyc7XHJcblxyXG5leHBvcnQgeyBkZWZhdWx0RGF0YSBhcyBfZGVmYXVsdERhdGEgfTtcclxuZXhwb3J0IHsgVHlwZSBhcyBfVHlwZSB9O1xyXG5leHBvcnQgeyB0b2tlbml6ZSBhcyBfdG9rZW5pemUgfTtcclxuZXhwb3J0IHsgY2xlYW5Db2RlIGFzIF9jbGVhbkNvZGUgfTtcclxuZXhwb3J0IHsgc3BsaXRDb2RlIGFzIF9zcGxpdENvZGUgfTtcclxuZXhwb3J0IHsgbGluZVRva2VuaXplciBhcyBfbGluZVRva2VuaXplciB9O1xyXG5leHBvcnQgeyB0b2tlbml6ZXIgYXMgX3Rva2VuaXplciB9O1xyXG5leHBvcnQgeyBjcmVhdGVNYWNoaW5lIH07XHJcbmV4cG9ydCB7IGludGVycHJldGVyIH07XHJcbmV4cG9ydCB7IHZhbGlkQWN0aW9ucyB9O1xyXG5leHBvcnQgeyB2YWxpZEV2ZW50cyB9O1xyXG5leHBvcnQgeyB2YWxpZFRpbWVVbml0cyB9O1xyXG5leHBvcnQgeyB2YWxpZEludGVyZmFjZUVsZW1lbnRzIH07XHJcbmV4cG9ydCB7IHZhbGlkQXBwQ21kcyB9O1xyXG5leHBvcnQgeyBpc09iaiBhcyBfaXNPYmogfTtcclxuZXhwb3J0IHsgaXNTdHIgYXMgX2lzU3RyIH07XHJcbmV4cG9ydCB7IGlzQXJyIGFzIF9pc0FyciB9O1xyXG5leHBvcnQgeyBtZXJnZSBhcyBfbWVyZ2UgfTtcclxuZXhwb3J0IHsgY2xvbmVEZWVwIGFzIF9jbG9uZURlZXAgfTtcclxuZXhwb3J0IHsgbWVzc2FnZUVycm9ycyBhcyBfbWVzc2FnZUVycm9ycyB9O1xyXG5leHBvcnQgeyBnZXRLZXlzIGFzIF9nZXRLZXlzIH07XHJcbmV4cG9ydCB7IGNvbnZlcnRUaW1lIGFzIF9jb252ZXJ0VGltZSB9O1xyXG5leHBvcnQgeyBjb2RlUGFyc2VyIH07XHJcbmV4cG9ydCB7IHNlbWFudGljQW5hbHlzZSB9OyIsImltcG9ydCB7IG1lc3NhZ2VFcnJvcnMsIGNvbnZlcnRUaW1lLCBjbG9uZURlZXAgfSBmcm9tICcuL2hlbHBlcnMnO1xyXG5pbXBvcnQgeyBEYXRhVHlwZSwgdmFsaWRBcHBDbWRzIH0gZnJvbSAnLi93b3JkYm9vayc7XHJcbmltcG9ydCB7IGNvZGVQYXJzZXIsIHNlbWFudGljQW5hbHlzZSB9IGZyb20gJy4vcGFyc2Vycyc7XHJcblxyXG4vKiAgRnVuw6fDo28gcXVlIHJldG9ybmEgdW1hIG3DoXF1aW5hIGRlIGVzdGFkb3NcclxuICAgIHBhcmEgbGlkYXIgY29tIG9zIGlucHV0IChyZXNwb3N0YXMpIGUgb3V0cHV0c1xyXG4qL1xyXG5cclxuLyogRXN0YWRvIHBhZHLDo28gZGEgbcOhcXVpbmEgKi9cclxuaW50ZXJmYWNlIFN0YXRlVHlwZSB7XHJcbiAgICBpbml0aWFsaXplZDogYm9vbGVhbixcclxuICAgIGNvdW50ZXJzOiBvYmplY3QsXHJcbiAgICBpbnRlcnZhbHM6IG9iamVjdCxcclxuICAgIHZhcmlhYmxlczogb2JqZWN0LFxyXG4gICAgdGltZXI6IG51bWJlcixcclxuICAgIGVsYXBzZWQ6IG51bWJlcixcclxuICAgIGhpc3Rvcnk6IG9iamVjdFtdXHJcbn07XHJcblxyXG5jb25zdCBkZWZhdWx0U3RhdGU6IFN0YXRlVHlwZSA9IHtcclxuICAgIGluaXRpYWxpemVkOiBmYWxzZSxcclxuICAgIGNvdW50ZXJzOiB7fSxcclxuICAgIGludGVydmFsczoge30sXHJcbiAgICB2YXJpYWJsZXM6IHt9LFxyXG4gICAgdGltZXI6IC0xLFxyXG4gICAgZWxhcHNlZDogMCxcclxuICAgIGhpc3Rvcnk6IFtdXHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVNYWNoaW5lID0gKGRhdGE6IERhdGFUeXBlLCBpbnRlcnZhbCA9IDIwMCkgPT4ge1xyXG5cclxuICAgIGlmKGRhdGEuZXJyb3JzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IG1lc3NhZ2VFcnJvcnMuY29kZUVycm9yKGRhdGEuZXJyb3JzKSxcclxuICAgICAgICAgICAgICAgIHJ1bjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgc3RhdGUgPSBjbG9uZURlZXAoZGVmYXVsdFN0YXRlKTtcclxuICAgIHZhciB2YWxpZElucHV0cyA9IHZhbGlkQXBwQ21kcy5jb25jYXQoZGF0YS5yZXNwb25zZXMpO1xyXG5cclxuICAgIHN0YXRlLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIGlmKCAhc3RhdGUuaW5pdGlhbGl6ZWQgKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvcihsZXQga2V5IGluIHN0YXRlLmludGVydmFscyl7XHJcbiAgICAgICAgICAgIGlmKGtleSl7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5pbnRlcnZhbHNba2V5XSArPSAtaW50ZXJ2YWw7XHJcbiAgICAgICAgICAgICAgICBpZihzdGF0ZS5pbnRlcnZhbHNba2V5XSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaW50ZXJ2YWxzW2tleV0gPSAwOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzdGF0ZS5lbGFwc2VkID0gRGF0ZS5ub3coKSAtIHN0YXRlLmhpc3RvcnlbMF0uYXQ7XHJcbiAgICB9LCBpbnRlcnZhbCk7XHJcblxyXG4gICAgY29uc3QgbWFjaGluZSA9IGZ1bmN0aW9uKGlucHV0OiBzdHJpbmcpe1xyXG5cclxuICAgICAgICBsZXQgdG9SZXR1cm46YW55ID0ge1xyXG4gICAgICAgICAgICAvKiBTZSB0aXZlciBhbGd1bSBlcnJvLCByZXRvcm5hICovXHJcbiAgICAgICAgICAgIGVycm9yOiAnJyxcclxuICAgICAgICAgICAgLyogU2UgaG91dmVyIGFsZ3VtYSBjb25zZXF1w6puY2lhLCByZXRvcm5hICovXHJcbiAgICAgICAgICAgIHJ1bjogZmFsc2UsXHJcbiAgICAgICAgICAgIC8qIFRlbXBvIGRlY29ycmlkbyBkZXNkZSBvIGluw61jaW8gKi9cclxuICAgICAgICAgICAgZWxhcHNlZDogc3RhdGUuZWxhcHNlZCxcclxuICAgICAgICAgICAgLyogSG9yYSBhdHVhbCAqL1xyXG4gICAgICAgICAgICBhdDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgLyogSGlzdMOzcmljbyBkZSBhw6fDtWVzICovXHJcbiAgICAgICAgICAgIGhpc3Rvcnk6IG51bGxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiBDYXNvIGEgZW50cmFkYSBzZWphIG51bGEsIG91IG7Do28gc2VqYSBzdHJpbmcgbmVtIG9iamV0byAqL1xyXG4gICAgICAgIGlmKCAhdmFsaWRJbnB1dHMuaW5jbHVkZXMoaW5wdXQpICl7XHJcbiAgICAgICAgICAgIHRvUmV0dXJuLmVycm9yID0gbWVzc2FnZUVycm9ycy5pbnZhbGlkSW5wdXQoaW5wdXQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0b1JldHVybjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKiBSb2RhIGNvbWFuZG9zIGVzcGVjw61maWNvcyAoUlVOLCBSRVNFVCwgRklOSVNIKSAqL1xyXG4gICAgICAgIHN3aXRjaChpbnB1dCl7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lOSVQnOlxyXG4gICAgICAgICAgICAgICAgLyogU2UgasOhIHRpdmVyIHNpZG8gaW5pY2lhZG8gZMOhIGVycm8gKi9cclxuICAgICAgICAgICAgICAgIGlmKCAhc3RhdGUuaW5pdGlhbGl6ZWQgKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvUmV0dXJuLmVycm9yID0gbWVzc2FnZUVycm9ycy5hbHJlYWR5U3RhcnRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b1JldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhLmNvbnRyb2xsZXJzLmZvckVhY2goIChjdHJsOmFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmNvdW50ZXJzW2N0cmwuaW5wdXRdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiggY3RybC5ydW5BZnRlci50aW1lICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmludGVydmFsc1tjdHJsLmlucHV0XSA9IGNvbnZlcnRUaW1lKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5ydW5BZnRlci50aW1lLCBjdHJsLnJ1bkFmdGVyLnVuaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0b1JldHVybi5ydW4gPSAnSU5JVCc7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5oaXN0b3J5LnB1c2goY2xvbmVEZWVwKHRvUmV0dXJuKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9SZXR1cm47XHJcbiAgICAgICAgICAgIGNhc2UgJ1JFU0VUJzpcclxuICAgICAgICAgICAgICAgIC8qIEZhbHRhIGZhemVyICovXHJcbiAgICAgICAgICAgICAgICB0b1JldHVybi5lcnJvciA9ICdCVUcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvUmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0ZJTklTSCc6XHJcbiAgICAgICAgICAgICAgICBpZiggc3RhdGUuaW5pdGlhbGl6ZWQgKXtcclxuICAgICAgICAgICAgICAgICAgICB0b1JldHVybi5ydW4gPSAnRklOSVNIJztcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5oaXN0b3J5LnB1c2goY2xvbmVEZWVwKHRvUmV0dXJuKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9SZXR1cm4uaGlzdG9yeSA9IHN0YXRlLmhpc3Rvcnk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzdGF0ZS50aW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvUmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0b1JldHVybi5lcnJvciA9IG1lc3NhZ2VFcnJvcnMubm90QWxyZWFkeVN0YXJ0ZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9SZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoICFzdGF0ZS5pbml0aWFsaXplZCApe1xyXG4gICAgICAgICAgICB0b1JldHVybi5lcnJvciA9IG1lc3NhZ2VFcnJvcnMubm90QWxyZWFkeVN0YXJ0ZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRvUmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiBBcXVpIHBvZGUgYWNvbnRlY2VyIHVtIHN1cGVyIGJ1ZyBiaXp6YXJvXHJcbiAgICAgICAgICAgcXVhbmRvIHVtYSByZXNwb3N0YSAoUjEpIGZvciB1c2FkYSBlbSBcclxuICAgICAgICAgICBkdWFzIGNvbnRpbmfDqm5jaWFzIGRpZmVyZW50ZXNcclxuICAgICAgICAqL1xyXG4gICAgICAgIHN0YXRlLmNvdW50ZXJzW2lucHV0XSArPSAxO1xyXG4gICAgICAgIGxldCBjb25zZXF1ZW5jZTogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBkYXRhLmNvbnRyb2xsZXJzLmZvckVhY2goIChjdHJsOmFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZihjdHJsLmlucHV0ID09IGlucHV0KXtcclxuICAgICAgICAgICAgICAgIGlmKCBjdHJsLnJ1bkFmdGVyLmF0dGVtcHRzID09IDEgKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNlcXVlbmNlID0gY3RybC5vdXRwdXQ7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKFxyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwucnVuQWZ0ZXIuYXR0ZW1wcnMgPiAxICYmIFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmNvdW50ZXJzW2lucHV0XSA9PSBjdHJsLnJ1bkFmdGVyLmF0dGVtcHRzXHJcbiAgICAgICAgICAgICAgICApe1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmNvdW50ZXJzW2lucHV0XSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc2VxdWVuY2UgPSBjdHJsLm91dHB1dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0b1JldHVybi5ydW4gPSBjb25zZXF1ZW5jZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYoIGNvbnNlcXVlbmNlLmxlbmd0aCA+IDAgKVxyXG4gICAgICAgICAgICBzdGF0ZS5oaXN0b3J5LnB1c2goY2xvbmVEZWVwKHRvUmV0dXJuKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRvUmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIG1hY2hpbmUuc3RhdGUgPSBzdGF0ZTtcclxuICAgIHJldHVybiBtYWNoaW5lO1xyXG59O1xyXG5cclxuY29uc3QgaW50ZXJwcmV0ZXIgPSAoY29kZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBwYXJzZWRDb2RlID0gY29kZVBhcnNlcihjb2RlKTtcclxuICAgIGNvbnN0IGRhdGEgPSBzZW1hbnRpY0FuYWx5c2UocGFyc2VkQ29kZSk7XHJcbiAgICByZXR1cm4gY3JlYXRlTWFjaGluZShkYXRhKTtcclxufTtcclxuXHJcbmV4cG9ydCB7IGNyZWF0ZU1hY2hpbmUsIGludGVycHJldGVyIH0iXSwic291cmNlUm9vdCI6IiJ9